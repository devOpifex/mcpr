<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Using the MCP Client • mcpr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Using the MCP Client">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mcpr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/client-integration.html">Integrating mcpr with MCP Clients</a></li>
    <li><a class="dropdown-item" href="../articles/client-usage.html">Using the MCP Client</a></li>
    <li><a class="dropdown-item" href="../articles/get-started.html">Getting Started with mcpr</a></li>
    <li><a class="dropdown-item" href="../articles/practical-examples.html">Practical MCP Examples with R</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/devOpifex/mcpr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Using the MCP Client</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/devOpifex/mcpr/blob/HEAD/vignettes/client-usage.Rmd" class="external-link"><code>vignettes/client-usage.Rmd</code></a></small>
      <div class="d-none name"><code>client-usage.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mcpr.opifex.org/">mcpr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>mcpr</code> package allows you to not only create Model
Context Protocol (MCP) servers in R but also connect to existing MCP
servers as a client. This vignette will guide you through using the MCP
client to interact with servers.</p>
</div>
<div class="section level2">
<h2 id="creating-an-mcp-client">Creating an MCP Client<a class="anchor" aria-label="anchor" href="#creating-an-mcp-client"></a>
</h2>
<p>The client functionality allows you to connect to any MCP server,
whether it’s running locally as a separate process, or remotely via
HTTP. Here’s how to create a client:</p>
<div class="section level3">
<h3 id="connecting-to-a-local-server-process">Connecting to a Local Server Process<a class="anchor" aria-label="anchor" href="#connecting-to-a-local-server-process"></a>
</h3>
<p>You can connect to a server running as a separate process. This is
useful for testing or when you need to communicate with a local MCP
implementation:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a client that connects to a local process</span></span>
<span><span class="va">client</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/new_client.html">new_client</a></span><span class="op">(</span></span>
<span>  <span class="st">"Rscript"</span>,                                <span class="co"># Command to run</span></span>
<span>  <span class="st">"path/to/your/server.R"</span>,                  <span class="co"># Path to the server script</span></span>
<span>  name <span class="op">=</span> <span class="st">"calculator"</span>,                      <span class="co"># Optional name for the server</span></span>
<span>  version <span class="op">=</span> <span class="st">"1.0.0"</span>                         <span class="co"># Optional version</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="connecting-to-an-http-server">Connecting to an HTTP Server<a class="anchor" aria-label="anchor" href="#connecting-to-an-http-server"></a>
</h3>
<p>You can also connect to an MCP server running over HTTP:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a client that connects to an HTTP server</span></span>
<span><span class="va">http_client</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/new_client.html">new_client</a></span><span class="op">(</span><span class="st">"Rscript"</span>, <span class="st">"path/to/your/server.R"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="basic-client-operations">Basic Client Operations<a class="anchor" aria-label="anchor" href="#basic-client-operations"></a>
</h2>
<p>Once you have created a client, you can interact with the server
using the various client methods:</p>
<div class="section level3">
<h3 id="initializing-the-connection">Initializing the Connection<a class="anchor" aria-label="anchor" href="#initializing-the-connection"></a>
</h3>
<p>It’s good practice to initialize the connection first:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Initialize the connection</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/initialize.html">initialize</a></span><span class="op">(</span><span class="va">client</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="listing-available-tools">Listing Available Tools<a class="anchor" aria-label="anchor" href="#listing-available-tools"></a>
</h3>
<p>You can list all the tools that the server provides:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get a list of available tools</span></span>
<span><span class="va">tools</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tools_list.html">tools_list</a></span><span class="op">(</span><span class="va">client</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tools</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="calling-a-tool">Calling a Tool<a class="anchor" aria-label="anchor" href="#calling-a-tool"></a>
</h3>
<p>Once you know what tools are available, you can call them with
specific parameters:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Call the math_calculator tool</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tools_call.html">tools_call</a></span><span class="op">(</span></span>
<span>  <span class="va">client</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"math_calculator"</span>,</span>
<span>    params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      name <span class="op">=</span> <span class="st">"add"</span>,</span>
<span>      arguments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        a <span class="op">=</span> <span class="fl">10</span>,</span>
<span>        b <span class="op">=</span> <span class="fl">5</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="working-with-prompts">Working with Prompts<a class="anchor" aria-label="anchor" href="#working-with-prompts"></a>
</h3>
<p>If the server has prompts available, you can list and use them:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List available prompts</span></span>
<span><span class="va">prompts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prompts_list.html">prompts_list</a></span><span class="op">(</span><span class="va">client</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">prompts</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get a specific prompt</span></span>
<span><span class="va">prompt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prompts_get.html">prompts_get</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"example-prompt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">prompt</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="working-with-resources">Working with Resources<a class="anchor" aria-label="anchor" href="#working-with-resources"></a>
</h3>
<p>You can also access resources provided by the server:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List available resources</span></span>
<span><span class="va">resources</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/resources_list.html">resources_list</a></span><span class="op">(</span><span class="va">client</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">resources</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Read a specific resource</span></span>
<span><span class="va">resource_content</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/resources_read.html">resources_read</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"example-resource"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">resource_content</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="complete-example">Complete Example<a class="anchor" aria-label="anchor" href="#complete-example"></a>
</h2>
<p>Here’s a complete example that demonstrates connecting to a
calculator server and performing operations:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a client</span></span>
<span><span class="va">client</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/new_client.html">new_client</a></span><span class="op">(</span></span>
<span>  <span class="st">"Rscript"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples/calculator/server.R"</span>, package <span class="op">=</span> <span class="st">"mcpr"</span><span class="op">)</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"calculator"</span>,</span>
<span>  version <span class="op">=</span> <span class="st">"1.0.0"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Initialize the connection</span></span>
<span><span class="fu"><a href="../reference/initialize.html">initialize</a></span><span class="op">(</span><span class="va">client</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List available tools</span></span>
<span><span class="va">tools</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tools_list.html">tools_list</a></span><span class="op">(</span><span class="va">client</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tools</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Call the math_calculator tool with different operations</span></span>
<span><span class="va">add_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tools_call.html">tools_call</a></span><span class="op">(</span></span>
<span>  <span class="va">client</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"math_calculator"</span>,</span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    operation <span class="op">=</span> <span class="st">"add"</span>,</span>
<span>    a <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    b <span class="op">=</span> <span class="fl">5</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">add_result</span><span class="op">)</span></span>
<span></span>
<span><span class="va">multiply_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tools_call.html">tools_call</a></span><span class="op">(</span></span>
<span>  <span class="va">client</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"math_calculator"</span>,</span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    operation <span class="op">=</span> <span class="st">"multiply"</span>,</span>
<span>    a <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    b <span class="op">=</span> <span class="fl">5</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">multiply_result</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="practical-use-cases">Practical Use Cases<a class="anchor" aria-label="anchor" href="#practical-use-cases"></a>
</h2>
<p>MCP clients can be used in various scenarios:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Integration with External AI Services</strong>: Connect to
AI models or services that expose an MCP interface</li>
<li>
<strong>Microservices Architecture</strong>: Communicate between
different R services using the MCP protocol</li>
<li>
<strong>Testing MCP Servers</strong>: Verify that your MCP server
implementations work correctly</li>
<li>
<strong>Building UI Applications</strong>: Create user interfaces
that interact with MCP servers to provide functionality</li>
</ol>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>The MCP client functionality in the <code>mcpr</code> package
provides a flexible way to interact with MCP servers from R. Whether
you’re building applications that consume AI capabilities or creating
distributed systems that communicate via MCP, the client interface makes
it easy to work with the protocol.</p>
<p>For more advanced usage, check the function documentation and other
vignettes.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Coene, Opifex.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
